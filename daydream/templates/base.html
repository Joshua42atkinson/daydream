<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Daydream{% endblock %}</title>

    {# --- Link to your main CSS file --- #}
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    {# --- Block for any page-specific styles (optional) --- #}
    {% block styles %}{% endblock %}
</head>
<body>

    {# --- Header with Top Info Bar --- #}
    <header class="top-info-bar">
        {# Left side: Branding and maybe basic game state #}
        <div class="bar-left">
             <a href="{{ url_for('profile.profile') if session.user_id else url_for('auth.login') }}" style="font-weight: bold; font-size: 1.1em; border: none;">Daydream</a>
             {# Display character info if available (Requires passing character_data to base template or checking session) #}
             {# Example check (adjust based on how you pass data): #}
             {% if session.get('character_id') and character_data %}
                 <span>Character: {{ character_data.name | default('N/A') }}</span>
                 <span>Location: {{ character_data.current_location_name | default('Unknown') }}</span>
                 <span>Fate: {{ character_data.fate_points | default('?') }}</span>
             {% endif %}
        </div>

        {# Right side: Navigation links based on login status #}
        <div class="bar-right">
             {% if session.user_id %}
                <a href="{{ url_for('profile.profile') }}">Profile</a>
                <a href="{{ url_for('game.game_view') }}">Game</a>
                <a href="{{ url_for('journal.journal_char_quest') }}">Journal (Char/Quest)</a>
                <a href="{{ url_for('journal.journal_vocab_report') }}">Journal (Vocab/Reports)</a>
                <a href="{{ url_for('auth.logout') }}">Logout</a>
            {% else %}
                <a href="{{ url_for('auth.login') }}">Login</a>
                <a href="{{ url_for('auth.signup') }}">Sign Up</a>
            {% endif %}
        </div>
    </header>

    {# --- Main Content Area --- #}
    <main>
        {# Flash messages display area #}
        <div class="container flash-container">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <ul class="flash-messages">
                        {% for category, message in messages %}
                            <li class="{{ category | default('info') }}">{{ message }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}
        </div>

        {# Main content block for child templates to fill #}
        {% block content %}
            {# Default content if a child template doesn't define this block #}
            <div class="container">
                <p>This is the base template. Content should be defined in child templates.</p>
            </div>
        {% endblock %}
    </main>

    {# --- Footer --- #}
    <footer>
        <div class="container footer-content">
             <hr>
             <p>&copy; 2025 Daydream Project</p> {# Adjust year if needed #}
        </div>
    </footer>

    {# --- Script block for child templates --- #}
    {% block scripts %}
        {# Global JavaScript can be added here if needed #}
    {% endblock %}
</body>
</html>